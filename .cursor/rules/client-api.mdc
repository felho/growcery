---
description: Client-side API standards
globs: src/lib/client-api/**/*
alwaysApply: false
---

# Client API Guidelines

## Types and Schemas
- Location: Place all Zod schemas in `zod-schemas/` directory
- Structure: One file per entity (e.g., `comp-matrix.ts`, `users.ts`)
- Organization: Keep all schemas for an entity in a single file
  - Include create, update, and other operation schemas in the same file
  - Use descriptive names for different schemas (e.g., `createCompMatrixSchema`, `updateCompMatrixSchema`)
  - Export all schemas and their types from the same file

## Organization
- Location: Place all client API functions in `lib/client-api/`
- Structure: One file per entity (e.g., `functions.ts`, `users.ts`)
- Index File: Optional aggregator file for easier imports

## Implementation
- Purpose: Wrap client-side fetch calls to API routes
- Error Handling: Include proper error handling in all client API functions
- Types: Use shared types from server-side when possible

## Example Implementation
```typescript
import { User } from "~/server/queries/users";

export const getUser = async (id: string): Promise<User | null> => {
  try {
    const response = await fetch(`/api/users/${id}`);
    
    if (!response.ok) {
      throw new Error(`Failed to fetch user: ${response.statusText}`);
    }
    
    return response.json();
  } catch (error) {
    console.error("Error fetching user:", error);
    return null;
  }
};
```